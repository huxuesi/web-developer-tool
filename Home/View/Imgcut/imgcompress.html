<include file="Index/head" title="图片压缩" />

		<link rel="stylesheet" href="_CSSPATH_/jquery.filer.css" />
		<link rel="stylesheet" href="_CSSPATH_/jquery.filer-dragdropbox-theme.css" />
		<style>
			.jFiler-theme-dragdropbox{ margin-top: 27px;}
			.startbox{ margin: 0 0 11px 0; text-align: center;}
			.startbox input{ width: 343px;}
		</style>
		
		<div class="container-fluid">
			<div class="row pb25">
				<include file="Index/leftnav" />
				<div class="col-md-10">
					<div class="box-border">
						<h3>图片压缩 <small>（图片最大不能超过 {$Think.config.MAX_UPLOAD_SIZE} M，图片越大，处理时间越长）</small></h3>
						<div class="box-upbefore">
							<form action="{:U('Imgcut/imgcompress')}" id="imgupform" role="form" method="post" enctype="multipart/form-data">
								<div class="form-group">
									<input type="file" name="files[]" id="filer_input" multiple="multiple">
								</div>
							</form>
						</div>
						<div class="box-upafter">
							上传之后页面
						</div>
					</div>
				</div>
			</div>
		</div>

<include file="Index/foot" />

<script src="_JSPATH_/jquery.filer.min.js"></script>
<script>
	$(function() {
		document.querySelector(".list-group-item[data-hover='{$currnav}']").className += " active"

		//图片上传
		$('#filer_input').filer({
			limit: 25,
			extensions: ['jpg', 'jpeg', 'png', 'gif'],
			maxSize: {$Think.config.MAX_UPLOAD_SIZE},
			changeInput: '<div class="jFiler-input-dragDrop"><div class="jFiler-input-inner"><div class="jFiler-input-icon"><i class="icon-jfi-cloud-up-o"></i></div><div class="jFiler-input-text"><h3>将文件拖放到此处</h3> <span style="display:inline-block; margin: 15px 0">或</span></div><a class="jFiler-input-choose-btn blue">选择文件</a></div></div><div class="startbox"><button class="btn btn-primary" type="button" id="start">开始压缩</button></div>',
			showThumbs: true,
			theme: "dragdropbox",
			templates: {
				box: '<ul class="jFiler-items-list jFiler-items-grid"></ul>',
				item: '<li class="jFiler-item">\
                    <div class="jFiler-item-container">\
                        <div class="jFiler-item-inner">\
                            <div class="jFiler-item-thumb">\
                                <div class="jFiler-item-status"></div>\
                                <div class="jFiler-item-info">\
                                    <span class="jFiler-item-title"><b title="{{fi-name}}">{{fi-name | limitTo: 25}}</b></span>\
                                    <span class="jFiler-item-others">{{fi-size2}}</span>\
                                </div>\
                                {{fi-image}}\
                            </div>\
                            <div class="jFiler-item-assets jFiler-row">\
                                <ul class="list-inline pull-left">\
                                    <li>{{fi-progressBar}}</li>\
                                </ul>\
                                <ul class="list-inline pull-right">\
                                    <li><a class="icon-jfi-trash jFiler-item-trash-action"></a></li>\
                                </ul>\
                            </div>\
                        </div>\
                    </div>\
                </li>',
				itemAppend: '<li class="jFiler-item">\
                        <div class="jFiler-item-container">\
                            <div class="jFiler-item-inner">\
                                <div class="jFiler-item-thumb">\
                                    <div class="jFiler-item-status"></div>\
                                    <div class="jFiler-item-info">\
                                        <span class="jFiler-item-title"><b title="{{fi-name}}">{{fi-name | limitTo: 25}}</b></span>\
                                        <span class="jFiler-item-others">{{fi-size2}}</span>\
                                    </div>\
                                    {{fi-image}}\
                                </div>\
                                <div class="jFiler-item-assets jFiler-row">\
                                    <ul class="list-inline pull-left">\
                                        <li><span class="jFiler-item-others">{{fi-icon}}</span></li>\
                                    </ul>\
                                    <ul class="list-inline pull-right">\
                                        <li><a class="icon-jfi-trash jFiler-item-trash-action"></a></li>\
                                    </ul>\
                                </div>\
                            </div>\
                        </div>\
                    </li>',
				progressBar: '<div class="bar"></div>',
				itemAppendToEnd: false,
				removeConfirmation: true,
				_selectors: {
					list: '.jFiler-items-list',
					item: '.jFiler-item',
					progressBar: '.bar',
					remove: '.jFiler-item-trash-action'
				}
			},
			dragDrop: {
				dragEnter: null,
				dragLeave: null,
				drop: null,
			},
			onSelect: function() {

			},
			onEmpty: function() {

			},
			captions: {
				button: "选择文件",
				feedback: "选择上传的文件",
				feedback2: "个文件被选择",
				drop: "把文件拖动到这里上传",
				removeConfirmation: "确定删除这个文件?",
				errors: {
					filesLimit: "只能上传 {{fi-limit}} 个文件.",
					filesType: "只能上传图像文件.",
					filesSize: "{{fi-name}} 太大了，允许上传的文件最大为 {{fi-maxSize}} MB.",
					filesSizeAll: "选择的文件太大了，允许上传的文件最大为 {{fi-maxSize}} MB."
				}
			}
		})

	})
</script>